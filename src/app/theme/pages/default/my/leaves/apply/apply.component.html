<div class="m-content">
	<div class="row">
		<div class="col-md-12">
			<div class="m-portlet m-portlet--tabs m-portlet--success m-portlet--head-solid-bg m-portlet--head-sm">
				<div class="m-portlet__head">
					<div class="m-portlet__head-caption">
						<div class="m-portlet__head-title">
							<h3 class="m-portlet__head-text flaticon-user-add">
								Leave Application
								<small>
								</small>
							</h3>
						</div>
					</div>
				</div>
				<div class="m-portlet__body">
					<div class="tab-content">
						<div class="tab-pane active show" id="applyLeavePanel" role="tabpanel">
							<form class="m-form m-form--fit m-form--label-align-right" (ngSubmit)="onLeaveAppSubmit(fleaveapplication)" id="fleaveapplication"
							 #fleaveapplication="ngForm">
								<div class="form-body">
									<div class="row">
										<div class="col-md-6 adn-form__group">
											<div class="m-form__group form-group">
												<label for="form_control_1">Leave Type</label>
												<span class="required" aria-required="true"> * </span>
												<ng-select #ddLeaveType class="m-input m-input--air" name="leaveType" bindValue="_id" bindLabel="type" [items]="leaveTypesDetails"
												 [(ngModel)]="leaveapplication.leaveType" id="leavetype" #leavetype="ngModel" placeholder="Select Leave Type"
												 (ngModelChange)="onChangeLeaveType()" required></ng-select>
												<div class="form-control-feedback has-danger" *ngIf="fleaveapplication.submitted && !leavetype.valid ">
													This field is required.
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 adn-form__group">
											<div class="m-form__group form-group">
												<label for="form_control_1">From Date</label>
												<span class="required" aria-required="true">* </span>
												<input type="text" class="form-control m-input m-input--air" name="fromDate" (ngModelChange)="calculateDays($event, 'fromDate')"
												 placeholder="Select From Date" [(ngModel)]="leaveapplication.fromDate" #fromDate="ngModel" bsDatepicker [readonly]="true"
												 [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }" id="fromDate" required>
												<div class="form-control-feedback has-danger" *ngIf="fleaveapplication.submitted">
													<span *ngIf="fleaveapplication.submitted && !fromDate.valid">This field is required.</span>
													<span *ngIf="fleaveapplication.submitted && !fromDateValidation.isValid">{{fromDateValidation.msg}}</span>
												</div>
											</div>
										</div>
										<div class="col-md-6 adn-form__group">
											<div class="m-form__group form-group">
												<label for="form_control_1">To Date</label>
												<span class="required" aria-required="true">* </span>
												<input type="text" class="form-control m-input m-input--air" name="toDate" (ngModelChange)="calculateDays($event, 'toDate')"
												 placeholder="Select To Date" bsDatepicker [readonly]="true" [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }" id="toDate"
												 [(ngModel)]="leaveapplication.toDate" #toDate="ngModel" required>
												<div class="form-control-feedback has-danger" *ngIf="!toDate.valid">
													<span *ngIf="fleaveapplication.submitted && !toDate.valid">This field is required.</span>

												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 adn-form__group">
											<div class="m-form__group form-group">
												<label for="form_control_1">Days</label>
												<span class="required" aria-required="true">* </span>
												<input type="text" name="days" class="form-control m-input m-input--air" OnlyNumber="true" [(ngModel)]="leaveapplication.days"
												 #days="ngModel" disabled>
												<div class="form-control-feedback has-danger" *ngIf="fleaveapplication.submitted">
													<span *ngIf="!areDaysValid">Days cant be 0</span>
												</div>
											</div>
										</div>
										<div class="col-md-6 adn-form__group">
											<div class="m-form__group form-group">
												<label for="form_control_1">Balance</label>
												<span class="required" aria-required="true">* </span>
												<input type="text" class="form-control m-input m-input--air" name="balance" id="balance" [(ngModel)]="leaveapplication.balance"
												 #balance="ngModel" OnlyNumber="true" disabled>
												<div class="form-control-feedback has-danger" *ngIf="fleaveapplication.submitted">
													<span *ngIf="!isBalanceValid">Not enough balance</span>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 adn-form__group">
											<div class="form-group m-form__group">
												<label for="form_control_1">Apply To</label>
												<span class="required" aria-required="true">* </span>
												<ng-select class="m-input m-input--air" name="applyto" bindValue="_id" placeholder="Select Apply To" bindLabel="fullName"
												 [items]="supervisorDetails" [(ngModel)]="leaveapplication.applyToId" #applyto="ngModel" required></ng-select>
												<div class="form-control-feedback has-danger" *ngIf="!applyto.valid">
													<span *ngIf="fleaveapplication.submitted && !applyto.valid">This field is required.</span>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 adn-form__group">
											<div class="m-form__group form-group">
												<label for="form_control_1">Reason</label>
												<span class="required" aria-required="true"> * </span>
												<textarea name="reason" id="reason" class="form-control m-input m-input--air" rows="3" placeholder="Reason" [(ngModel)]="leaveapplication.reason"
												 #reason="ngModel" required></textarea>
												<div class="form-control-feedback has-danger" *ngIf="fleaveapplication.submitted && !reason.valid">
													This field is required.
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 adn-form__group">
											<div class="m-form__group form-group">
												<label for="form_control_1">Contact Detail</label>
												<textarea name="contactDetail" id="contactDetail" class="form-control m-input m-input--air" rows="3" placeholder="Contact Details"
												 [(ngModel)]="leaveapplication.contactDetail" name="contactDetail" #contactDetail="ngModel"></textarea>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 adn-form__group">
											<div class="m-form__group form-group">
												<label for="form_control_1">Attachment</label>
												<span class="required" aria-required="true"> * </span>
												<input type="file" name="attachment" [(ngModel)]="leaveapplication.attachment" #attachment="ngModel">
												<div class="form-control-feedback has-danger" *ngIf="fleaveapplication.submitted">
													<span *ngIf="isAttachmentRequired">This field is required.</span>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-md-6 adn-form__group">
											<div class="m-form__group form-group">
												<label for="form_control_1">CC To</label>
												<ng-select class="m-input m-input--air" name="ccTo" [items]="emailDetails" [(ngModel)]="leaveapplication.ccTo" #ccTo="ngModel"
												 placeholder="Select CC To" bindLabel="personalEmail" bindValue="personalEmail" multiple="true"></ng-select>
											</div>
										</div>
									</div>
								</div>
								<div class="form-actions">
									<div class="row">
										<div class="col-md-12">
											<div class="m-form__actions">
												<button class="btn btn-success submitForm" type="submit" id="submitForm">Apply</button>
												<button class="btn btn-secondary" (click)="fleaveapplication.resetForm();InitValues();" type="button">Cancel</button>
											</div>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>